# 时间表组件重构总结

## 重构目标
1. 更新上课节次与时间的映射关系
2. 将组件进一步抽象和拆分，减少代码行数
3. 提高代码可维护性和复用性

## 重构内容

### 1. 时间映射更新
- **新增文件**: `lib/timeMapping.ts`
- **更新时间映射**: 使用新的时间映射关系
  ```typescript
  export const timeMapping = {
    1: "08-00",
    2: "09-40", 
    3: "10-00",
    4: "11-40",
    5: "14-00",
    6: "15-40",
    7: "16-00",
    8: "17-40",
    9: "19-00",
    10: "20-40",
    11: "21-00",
    12: "22-40",
  }
  ```

### 2. 组件拆分
- **课程卡片组件**: `components/course-card.tsx`
  - `CourseCard`: 桌面版课程卡片
  - `MobileCourseCard`: 移动版课程卡片

- **时间表头部组件**: `components/timetable-header.tsx`
  - `TimetableHeader`: 包含标题、学期选择器、周末切换
  - `WeekendToggle`: 周末显示切换组件

- **桌面版时间表**: `components/desktop-timetable.tsx`
  - 专门处理桌面版时间表布局

- **移动版时间表**: `components/mobile-timetable.tsx`
  - 专门处理移动版时间表布局

### 3. 主组件重构
- **原始文件**: `components/timetable.tsx`
- **行数减少**: 从340行减少到约60行
- **职责清晰**: 只负责数据管理和组件组合

## 技术改进

### 代码组织
- **单一职责**: 每个组件只负责一个功能
- **可复用性**: 组件可以在其他地方复用
- **可维护性**: 代码结构清晰，易于维护

### 性能优化
- **减少重复代码**: 避免重复的时间映射逻辑
- **模块化**: 更容易进行单元测试
- **类型安全**: 完整的TypeScript类型定义

## 文件结构
```
components/
├── timetable.tsx              # 主组件（重构后）
├── course-card.tsx            # 课程卡片组件
├── timetable-header.tsx       # 时间表头部组件
├── desktop-timetable.tsx      # 桌面版时间表
└── mobile-timetable.tsx       # 移动版时间表

lib/
└── timeMapping.ts             # 时间映射工具
```

## 验证结果
- ✅ 构建成功（`pnpm build`）
- ✅ 开发服务器正常运行
- ✅ 时间映射关系正确应用
- ✅ 组件拆分后功能完整
- ✅ 响应式设计正常工作

## 后续建议
1. **单元测试**: 为各个子组件添加单元测试
2. **性能优化**: 考虑使用React.memo优化重渲染
3. **主题系统**: 将颜色配置提取到主题系统中
4. **国际化**: 支持多语言切换